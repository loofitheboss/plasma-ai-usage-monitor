# Auto-generated by workspace sync. Source: .workspace/config.json
name: Config Drift Check

on:
  pull_request:
    paths:
      - '.vscode/mcp.json'
      - '.copilot/mcp-config.json'
      - '.mcp.json'
      - '.github/copilot-instructions.md'
      - '.github/dependabot.yml'
      - '.github/agents/**'
  schedule:
    - cron: '0 6 * * 1' # Weekly Monday 6am UTC

permissions:
  contents: read

jobs:
  drift-check:
    name: Config sync check
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v6

      - name: Verify config fingerprint
        run: |
          echo "Checking config sync status for plasma-ai-usage-monitor..."
          echo "Configs were last synced from loofitheboss/Loofi-Veo-prompt-generator"
          echo "To re-sync: clone the workspace repo and run 'node scripts/sync-workspace.mjs'"

          # Check that key config files exist
          for f in .vscode/mcp.json .copilot/mcp-config.json .mcp.json .github/copilot-instructions.md; do
            if [ ! -f "$f" ]; then
              echo "::warning::Missing synced config: $f"
            else
              echo "âœ… $f exists"
            fi
          done
